# مساعد الدردشة الطبي المحسن

هذا المستند يشرح التحسينات التي تم إضافتها إلى مساعد الدردشة الطبي في نظام حجز المواعيد الطبية.

## الميزات الجديدة

### 1. محادثة أكثر إنسانية

- **ترحيب شخصي**: يتعرف على المستخدم ويقدم تحية مخصصة بناءً على الوقت من اليوم والمواعيد القادمة.
- **لغة تعاطفية**: يستخدم لغة دافئة وتعاطفية تشعر المرضى بالراحة.
- **حفظ سياق المحادثة**: يتذكر المعلومات السابقة ويستخدمها في الاستجابات اللاحقة.

### 2. جمع أعراض مفصل

- **أسئلة متابعة مخصصة**: يطرح أسئلة محددة بناءً على الأعراض الأولية للمريض.
- **تقييم شدة الأعراض**: يقيم مستوى الإلحاح ويقدم نصائح مناسبة.
- **تسجيل الأعراض**: يحفظ سجل الأعراض في ملف المريض للرجوع إليه في المستقبل.

### 3. التشخيص الأولي والتوصيات

- **تحليل نمط الأعراض**: يربط بين الأعراض المختلفة لتقديم تقييم أكثر دقة.
- **تحديد التخصص المناسب**: يقترح التخصص الطبي الأنسب بناءً على الأعراض.
- **تعليمات السلامة**: يقدم إرشادات فورية في الحالات الطارئة.

### 4. تكامل قاعدة البيانات المحلية

- **البحث عن الأطباء**: يبحث عن الأطباء المتخصصين المتاحين بناءً على احتياجات المريض.
- **حجز المواعيد**: يمكنه حجز أقرب موعد متاح وتأكيد التفاصيل.
- **معلومات المريض**: يمكنه استرجاع المعلومات الطبية السابقة للمريض لتقديم خدمة أفضل.

### 5. المتابعة والنصائح

- **تذكيرات المواعيد**: يرسل تذكيرات بالمواعيد القادمة مع تعليمات خاصة.
- **نصائح رعاية أولية**: يقدم توصيات للعناية الذاتية قبل موعد الطبيب.
- **أسئلة متابعة**: يقترح أسئلة ذات صلة لمساعدة المريض على استكشاف حالته.

## أمثلة للمحادثات

### مثال 1: شكوى صداع

**المريض**: "عندي صداع شديد منذ 3 أيام مع غثيان"

**الاستجابة**:
```
مرحباً أحمد، أنا آسف لسماع ذلك.

بناءً على ما وصفت، قد يكون صداعك ناتجًا عن عدة أسباب مثل الصداع النصفي، صداع التوتر، أو التهاب الجيوب الأنفية.

مستوى الإلحاح: متوسط - يُنصح بزيارة الطبيب خلال 24-48 ساعة إذا استمرت الأعراض.

بناءً على الأعراض التي وصفتها، قد تحتاج إلى استشارة طبيب أعصاب.

الأطباء المتاحين قريباً:
- د. سمير حسن - متاح 2023-05-10
- د. ليلى عمران - متاح 2023-05-11
هل ترغب في حجز موعد مع أحدهم؟

لفهم حالتك بشكل أفضل، هل يمكنك الإجابة على الأسئلة التالية:
- هل الصداع في جانب واحد من الرأس أم في كل الرأس؟
- هل تعاني من حساسية للضوء أو الصوت مع الصداع؟
- هل سبق أن أصبت بصداع مماثل من قبل؟
```

### مثال 2: حجز موعد

**المريض**: "أريد حجز موعد مع طبيب عظام"

**الاستجابة**:
```
يمكنني مساعدتك في حجز موعد مع طبيب عظام. هنا الأطباء المتاحين:

- د. محمد السيد (استشاري جراحة عظام)
  • المواعيد المتاحة: الأحد 15 مايو، 10:00 صباحًا، 12:30 ظهرًا
  • العيادة: مركز الشفاء الطبي، شارع النصر

- د. هدى الشريف (أخصائية عظام وروماتيزم)
  • المواعيد المتاحة: الإثنين 16 مايو، 9:00 صباحًا، 2:00 مساءً
  • العيادة: مستشفى الأمل، شارع الجامعة

هل ترغب في حجز أحد هذه المواعيد؟ أم تفضل مواعيد أخرى؟
```

## كيفية استخدام الميزات الجديدة

### للمطورين

يمكن استخدام الواجهات البرمجية الجديدة في `ILocalKnowledgeBase` لتنفيذ وظائف المساعد المحسنة:

```csharp
// Get enhanced medical advice with personalization and follow-up questions
var (matched, enhancedResponse, followUpQuestions) = 
    await _localKnowledgeBase.GetEnhancedMedicalAdviceAsync(symptoms, userId);

// Generate preliminary diagnosis
var (preliminaryDiagnosis, possibleConditions, urgencyLevel) = 
    await _localKnowledgeBase.GeneratePreliminaryDiagnosisAsync(symptoms, medicalHistory);

// Get personalized greeting
var greeting = await _localKnowledgeBase.GetEmpatheticGreetingAsync(userId);

// Find doctors based on symptoms
var recommendedDoctors = 
    await _localKnowledgeBase.GetRecommendedDoctorsAsync(specialty, userId);
```

### للمستخدمين

ببساطة بدء محادثة مع المساعد وسيقوم تلقائيًا باستخدام الميزات المحسنة بناءً على المدخلات. 